<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <script>
    window.onload = function() {
      // Parse the fragment for tokens
      const hash = window.location.hash.substring(1); // Remove '#'
      const params = new URLSearchParams(hash);

      // Build a query string from the fragment
      const query = params.toString();

      // Your app's localhost redirect - must match callbackUrlScheme in Flutter
      const redirectBase = "http://localhost:3000/auth";

      // Redirect with tokens in the query string
      console.log('Redirecting to:', `${redirectBase}?${query}`);
      window.location.href = `${redirectBase}?${query}`;
    };
  </script>
</head>
<body>
  <p>Redirecting to your app...</p>
  <p>If you're not redirected automatically, <a href="#" onclick="window.close()">click here to close this window</a></p>
</body>
</html> 
